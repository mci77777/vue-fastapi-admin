# GymBro Keycloak-FastAPI Authentication System
# Development Environment Configuration

# ============================
# GENERAL CONFIGURATION
# ============================
ENVIRONMENT=development
DEBUG=true
SECRET_KEY=your-super-secret-key-change-this-in-production-development
LOG_LEVEL=INFO

# ============================
# KEYCLOAK CONFIGURATION
# ============================
KEYCLOAK_HOSTNAME=localhost
KEYCLOAK_PORT=8080
KEYCLOAK_SERVER_URL=http://localhost:8080
KEYCLOAK_ADMIN_USER=admin
KEYCLOAK_ADMIN_PASSWORD=admin123
KEYCLOAK_REALM=gymbro-dev
KEYCLOAK_CLIENT_ID=gymbro-backend-dev
KEYCLOAK_CLIENT_SECRET=dev-backend-secret-123
KEYCLOAK_ISSUER=http://localhost:8080/realms/gymbro-dev
KC_LOG_LEVEL=INFO

# Keycloak Database
KEYCLOAK_DB_PASSWORD=keycloak123

# ============================
# FASTAPI CONFIGURATION
# ============================
FASTAPI_PORT=8000
WORKERS=1
HOST=0.0.0.0

# JWT Configuration
JWT_ALGORITHM=RS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=15
JWT_REFRESH_TOKEN_EXPIRE_DAYS=30

# ============================
# DATABASE CONFIGURATION
# ============================
# Local PostgreSQL (fallback)
POSTGRES_DB=gymbro
POSTGRES_USER=postgres
POSTGRES_PASSWORD=changethis
# Local PostgreSQL (fallback - disabled)
# DATABASE_URL=postgresql://postgres:changethis@postgres-app:5432/gymbro

# Database Configuration - Supabase
DATABASE_URL=postgresql://postgres.rykglivrwzcykhhnxwoz:tjVveFLRpRKjDl59@aws-0-us-west-1.pooler.supabase.com:6543/postgres?sslmode=require
DATABASE_KEY=tjVveFLRpRKjDl59
# Supabase Configuration (Primary Database)
# Publishable key
# This key is safe to use in a browser if you have enabled Row Level Security (RLS) for your tables and configured policies
# Secret keys
# These API keys allow privileged access to your project's APIs. Use in servers, functions, workers or other backend components of your application.

SUPABASE_URL=https://rykglivrwzcykhhnxwoz.supabase.co
SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJ5a2dsaXZyd3pjeWtoaG54d296Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTE3NjQ4MDUsImV4cCI6MjA2NzM0MDgwNX0.0q3Zpcn74q6K9oLWLBGu9Wwadn6zLYTOthAd39b-SKY
SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJ5a2dsaXZyd3pjeWtoaG54d296Iiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc1MTc2NDgwNSwiZXhwIjoyMDY3MzQwODA1fQ.2UzbgNrilMK-gPaG7xMpg3udhK_MM1xNPR_wjF11ptg
PUBLISHABLE_KEY=sb_publishable_YZnz-6LhPqUyBF9eEXZcbQ_QjRW5VnT
SECRET_KEY=sb_secret_JZba0OSzvqEYVJADziEazg_HG3u57I3

# ============================
# REDIS CONFIGURATION
# ============================
REDIS_URL=redis://:redis123@redis:6379/0
REDIS_PASSWORD=redis123

# ============================
# CORS AND SECURITY
# ============================
ALLOWED_ORIGINS='["http://localhost:3000", "http://localhost:5173", "http://localhost:8080", "http://localhost:80"]'
ALLOWED_HOSTS='["localhost", "127.0.0.1", "*"]'

# ============================
# MONITORING CONFIGURATION
# ============================
PROMETHEUS_METRICS_ENABLED=true

# ============================
# SSL/TLS CONFIGURATION
# ============================
TRUSTSTORE_PASSWORD=changeit

# ============================
# AI SERVICE CONFIGURATION
# ============================
OPENAI_API_BASE_URL=https://catsapi.com/v1/chat/completions
OPENAI_API_MODEL=mock-model
OPENAI_API_KEY=sk-v9MXieyx1YDLMz7Xbk0x8XLLBIDZu3R0OdmDEltVvB629Ekw
AI_MAX_TOKENS=64000
AI_TEMPERATURE=1
AI_TIMEOUT_SECONDS=120
AI_SSL_VERIFY=false
PROMPT_INJECT_MODE=assistant
AI_CONTENT_AS_PARTS=false



#▌为 gpt-5* 系列单独配置 Codex 聚合器
CODEX_API_BASE_URL=https://codex-api.packycode.com/v1/chat/completions
CODEX_API_KEY=sk-RNhuKT1lZUJTdUMcMrWAj0nNrvq5g7VP

# ============================
# Additional OpenAI-compatible aggregators
# ============================
# TBAI: for deepseek-r1, gemini-2.5-pro
TBAI_API_BASE_URL=https://tbai.xin/v1/chat/completions
TBAI_API_KEY=sk-iK0jeA9q3lPiQEdEzcpeCv9SFNdh1CUGoWY09Xq6ZqhSYX4V

# VELOERA: for Claude family
VELOERA_API_BASE_URL=https://zone.veloera.org/v1/chat/completions
VELOERA_API_KEY=sk-FeKzxnB72QzLcu5RyoCecjFfwxI1YxVDayehA9sFI4neYURH

# X666: dedicated for gemini-2.5-pro
X666_API_BASE_URL=https://x666.me/v1/chat/completions
X666_API_KEY=sk-VrozKDi7PlgvhldSdNF33nf85zfBPQUX3DG9ptzMgjDSTExU

# ============================
# PROXY FOR AI HTTP CLIENT
# ============================
# 设置 AI 客户端的 HTTP/HTTPS 代理；当宿主本机代理监听 127.0.0.1:10808 时，
# 应用会在容器内将 127.0.0.1/localhost 自动重写为 host.docker.internal（见 AI_PROXY_REWRITE_LOOPBACK）。
AI_HTTP_PROXY=http://127.0.0.1:10808
AI_HTTPS_PROXY=http://127.0.0.1:10808
AI_PROXY_REWRITE_LOOPBACK=true

# ============================
# SMTP (Resend) — used by Keycloak for email OTP/verification
# ============================
SMTP_HOST=smtp.resend.com
SMTP_PORT=587
SMTP_STARTTLS=true
SMTP_SSL=false
SMTP_AUTH=true
SMTP_USERNAME=resend
SMTP_PASSWORD=re_WCo6i98r_FrbTZApsy8Jf4cNPoqM1TgJT
SMTP_FROM=noreply@taxbattle.xyz
SMTP_FROM_NAME=GymBro DEV

RESEND_API_KEY=re_WCo6i98r_FrbTZApsy8Jf4cNPoqM1TgJT
